using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;


public class SM_EnemyManager_New : MonoBehaviour
{
    public int enemyCount;

    public static SM_EnemyManager_New instance;

    
    private void Awake()
    {
        if (instance == null)
        {
            instance = this;
        }
        else
        {
            Destroy(gameObject);
        }
    }

    public GameObject[] enemyPoint;
    public int[] numbers = { 0, 1, 2, 3 };
    public int num1;
    public int num2;
    public int i=0;

    float currTime;
    float A_currTime;
    float respawnTime = 4;
    float ATime;

    // Start is called before the first frame update
    public void Start()
    {
        //enemyStart[numbers[0]].SetActive(true);
        shuffle(); //처음에 배열 무작위로 섞는다
        print(numbers[0]); //순서확인
        print(numbers[1]);
        print(numbers[2]);
        print(numbers[3]);

        enemyPoint[numbers[i]].SetActive(true);
        //i++;
    }

    private void shuffle()
    {
        for( int i = 0; i < 10; i++)
        {
            int[] numbers = { 0, 1, 2, 3 };

            int nums1 = UnityEngine.Random.Range(0, numbers.Length);
            int nums2 = UnityEngine.Random.Range(0, numbers.Length);

            Swap(nums1, nums2);

        }
    }

    void Swap(int m, int n) //2개의 숫자를 바꾼다
    {

        int temp = numbers[m];
        numbers[m] = numbers[n];
        numbers[n] = temp;
    }

    public bool isEnemyA;
    public bool isDie;
    // Update is called once per frame
    void Update()
    {
        if (isEnemyA)
        {
            enemyPoint[numbers[i]].SetActive(false);
            i++;
            enemyPoint[numbers[i]].SetActive(true);
            isEnemyA = false;


            //초코 컨테이너 계속 채워야한다
            //attack move에서 더해진 chocoCount를 가지고와서
            //초코컨테이너에다가 초코를 채운다
            //만약 초코카운트가 3이된다면?
            //END Scene을 뽑는다.
        }

        if (isDie)
        {
            //리스폰한다
            //원위치시킨다(좌표찍어줌)
            //Move함수에 i값 0 으로 초기화한다
            //이것만 하면 되는데 진짜 위에걸 모르곘네

            //A_currTime += Time.deltaTime;
            //if (A_currTime > ATime)
            //{
            //    GetComponent<KH_EnemyAttackMove>().DieAnim();
            //}

            enemyPoint[numbers[i]].SetActive(false);
            currTime += Time.deltaTime;
            print("현재시간: " + currTime);
            if (currTime > respawnTime)
            {
                enemyPoint[numbers[i]].SetActive(true);
                isDie = false;
                currTime = 0;

            }
        }
    }
}
